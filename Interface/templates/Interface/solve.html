{% extends "Interface/base.html" %}
<!--  -->
{% block title%}{{problem.name}}{% endblock %}
<!--  -->
{% block content %}
<style type="text/css">
  #editor {
    min-width: 100%;
    min-height: 600px;
    margin-bottom: 20px;
    border-radius: 5px;
  }
  .editor-confine {
    padding: 50px;
    margin-bottom: 100px;
  }
  .submit_btn {
    float: right;
    width: 100px;
    height: 50px;
    margin-left: 10px;
  }
  .output {
    width: 100%;
    height: 200px;
    border: 1px solid gray;
    padding: 20px;
    border-radius: 5px;
    margin-bottom: 200px;
  }
</style>
<div id="userCode" style="display: none" data-json="{{userFile}}"></div>
<div id="problem" style="margin-bottom: 50px">
  <img
    style="height: auto; max-width: 95vw; object-fit: contain"
    src="/media/problems/statements/events/python/techfest/{{problem.problemHtml}}"
  />
</div>
<div class="container-fluid editor-confine">
  <h2 id="editorHead">Code Editor</h2>
  <div id="editor">print("hello world")</div>
  <a href="#output"
    ><button id="submit" class="btn btn-success submit_btn">Submit</button></a
  >
  <a href="#editorHead"
    ><button id="reset" class="btn btn-danger submit_btn">Reset</button></a
  >
</div>
<div class="container-fluid">
  <h2>Output</h2>
  <div class="output" id="output"></div>
</div>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.5/ace.js"
  type="text/javascript"
  charset="utf-8"
></script>
<script>
  var editor = ace.edit("editor");
  editor.setTheme("ace/theme/monokai");
  editor.session.setMode("ace/mode/python");
  editor.setShowPrintMargin(false);
  editor.session.setTabSize(2);
  editor.session.setUseSoftTabs(true);
  editor.resize();

  document.getElementById("editor").style.width = "80vw";
  document.getElementById("editor").style.fontSize = "20px";

  document.getElementById("submit").addEventListener("click", () => {
    editor.session.setValue(editor.getValue());
    console.log(editor.getValue());
  });

  document.getElementById("reset").addEventListener("click", () => {
    editor.session.setValue(
      document.getElementById("userCode").getAttribute("data-json")
    );
  });

  editor.session.setValue(
    document.getElementById("userCode").getAttribute("data-json")
  );
</script>

{% endblock %}
